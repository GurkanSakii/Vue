(function(){"use strict";var e={9425:function(e,t,l){var n=l(9242),a=l(3396);const i={class:"content"};function s(e,t,l,n,s,o){const r=(0,a.up)("Navbar"),u=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(r),(0,a._)("div",i,[(0,a.Wm)(u)])],64)}var o=l(7139),r=l(4563);const u=e=>((0,a.dD)("data-v-0a505fc3"),e=e(),(0,a.Cn)(),e),d={class:"navbar"},c=u((()=>(0,a._)("img",{src:r},null,-1))),p=(0,a.Uk)("Playlist"),v={class:"links"},g={key:0},m=(0,a.Uk)("Create Playlist"),y=(0,a.Uk)("My Playlists"),w={key:1},h=(0,a.Uk)("Signup"),f=(0,a.Uk)("Login");function _(e,t,l,n,i,s){const r=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",d,[(0,a._)("nav",null,[c,(0,a._)("h1",null,[(0,a.Wm)(r,{to:{name:"Home"}},{default:(0,a.w5)((()=>[p])),_:1})]),(0,a._)("div",v,[n.user?((0,a.wg)(),(0,a.iD)("div",g,[(0,a.Wm)(r,{to:{name:"CreatePlaylist"}},{default:(0,a.w5)((()=>[m])),_:1}),(0,a.Wm)(r,{to:{name:"UserPlaylists"}},{default:(0,a.w5)((()=>[y])),_:1}),(0,a._)("span",null,"Hi here, "+(0,o.zw)(n.user.displayName),1),(0,a._)("button",{onClick:t[0]||(t[0]=(...e)=>n.handleLogout&&n.handleLogout(...e))},"Logout")])):((0,a.wg)(),(0,a.iD)("div",w,[(0,a.Wm)(r,{class:"btn",to:{name:"Signup"}},{default:(0,a.w5)((()=>[h])),_:1}),(0,a.Wm)(r,{class:"btn",to:{name:"Login"}},{default:(0,a.w5)((()=>[f])),_:1})]))])])])}var b=l(4870),k=l(4275);l(7618),l(4059),l(4742);const D={apiKey:"AIzaSyDXrksWlhOGEAKdQO7Hv5nYWh_RiD7EVn8",authDomain:"playlist-project-2dcf5.firebaseapp.com",projectId:"playlist-project-2dcf5",storageBucket:"playlist-project-2dcf5.appspot.com",messagingSenderId:"116557053656",appId:"1:116557053656:web:f7ffd00df236abbf3ca1ad"};k.Z.initializeApp(D);const P=k.Z.firestore(),H=k.Z.auth(),S=k.Z.storage(),C=k.Z.firestore.FieldValue.serverTimestamp,U=(0,b.iH)(null),q=(0,b.iH)(!1),L=async()=>{U.value=null,q.value=!0;try{await H.signOut(),q.value=!1}catch(e){console.log(e.message),U.value=e.message,q.value=!1}},j=()=>({error:U,logout:L,isPending:q});var I=j;const A=(0,b.iH)(H.currentUser);H.onAuthStateChanged((e=>{console.log("User state change. Current user is:",e),A.value=e}));const z=()=>({user:A});var E=z,O=l(678),V={setup(){const{user:e}=E(),{logout:t}=I(),l=(0,O.tv)(),n=async()=>{await t(),console.log("user logged out"),l.push({name:"Login"})};return{handleLogout:n,user:e}}},W=l(89);const Z=(0,W.Z)(V,[["render",_],["__scopeId","data-v-0a505fc3"]]);var N=Z,x={components:{Navbar:N}};const M=(0,W.Z)(x,[["render",s]]);var F=M;const Y={class:"home"},K={key:0,class:"error"},T={key:1};function B(e,t,l,n,i,s){const o=(0,a.up)("ListView");return(0,a.wg)(),(0,a.iD)("div",Y,[n.error?((0,a.wg)(),(0,a.iD)("div",K,"Could not fetch the data")):(0,a.kq)("",!0),n.documents?((0,a.wg)(),(0,a.iD)("div",T,[(0,a.Wm)(o,{playlistview:n.documents},null,8,["playlistview"])])):(0,a.kq)("",!0)])}const R=(e,t)=>{const l=(0,b.iH)(null),n=(0,b.iH)(null);let i=P.collection(e).orderBy("createdAt");t&&(i=i.where(...t));const s=i.onSnapshot((e=>{let t=[];e.docs.forEach((e=>{e.data().createdAt&&t.push({...e.data(),id:e.id})})),l.value=t,n.value=null}),(e=>{console.log(e.message),l.value=null,n.value="could not fetch the data"}));return(0,a.m0)((e=>{e((()=>s()))})),{error:n,documents:l}};var $=R;const G={class:"single"},Q={class:"thumbnail"},X=["src"],J={class:"info"},ee={class:"song-number"};function te(e,t,l,n,i,s){const r=(0,a.up)("router-link");return(0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.playlistview,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[(0,a.Wm)(r,{to:{name:"PlaylistDetails",params:{id:e.id}}},{default:(0,a.w5)((()=>[(0,a._)("div",G,[(0,a._)("div",Q,[(0,a._)("img",{src:e.coverUrl,alt:""},null,8,X)]),(0,a._)("div",J,[(0,a._)("h3",null,(0,o.zw)(e.title),1),(0,a._)("p",null,"Created by "+(0,o.zw)(e.userName),1)]),(0,a._)("div",ee,[(0,a._)("p",null,(0,o.zw)(e.songs.length),1)])])])),_:2},1032,["to"])])))),128)}var le={props:["playlistview"]};const ne=(0,W.Z)(le,[["render",te],["__scopeId","data-v-9329bcbe"]]);var ae=ne,ie={name:"Home",components:{ListView:ae},setup(){const{error:e,documents:t}=$("playlists");return{error:e,documents:t}}};const se=(0,W.Z)(ie,[["render",B]]);var oe=se;const re=(0,a._)("h3",null,"Login",-1),ue={key:0,class:"error"},de={key:1},ce={key:2,disabled:""};function pe(e,t,l,i,s,r){return(0,a.wg)(),(0,a.iD)("form",{onSubmit:t[2]||(t[2]=(0,n.iM)(((...e)=>i.LoginSubmit&&i.LoginSubmit(...e)),["prevent"]))},[re,(0,a.wy)((0,a._)("input",{type:"email",placeholder:"Email","onUpdate:modelValue":t[0]||(t[0]=e=>i.email=e)},null,512),[[n.nr,i.email]]),(0,a.wy)((0,a._)("input",{type:"password",placeholder:"Password","onUpdate:modelValue":t[1]||(t[1]=e=>i.password=e)},null,512),[[n.nr,i.password]]),i.error?((0,a.wg)(),(0,a.iD)("div",ue,(0,o.zw)(i.error),1)):(0,a.kq)("",!0),i.isPending?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("button",de,"Log in")),i.isPending?((0,a.wg)(),(0,a.iD)("button",ce,"Loading")):(0,a.kq)("",!0)],32)}const ve=(0,b.iH)(null),ge=(0,b.iH)(!1),me=async(e,t)=>{ve.value=null,ge.value=!0;try{const l=await H.signInWithEmailAndPassword(e,t);return ve.value=null,ge.value=!1,l}catch(l){ge.value=!1,console.log(l.message),ve.value="Incorrect login credentials"}},ye=()=>({error:ve,login:me,isPending:ge});var we=ye,he={setup(){const{error:e,login:t,isPending:l}=we(),n=(0,b.iH)(""),a=(0,b.iH)(""),i=(0,O.tv)(),s=async()=>{await t(n.value,a.value);e.value||(i.push({name:"UserPlaylists"}),console.log("user logged in"))};return{email:n,password:a,LoginSubmit:s,error:e,isPending:l}}};const fe=(0,W.Z)(he,[["render",pe]]);var _e=fe;const be=(0,a._)("h3",null,"Sign up",-1),ke={key:0,class:"error"},De={key:1},Pe={key:2,disabled:""};function He(e,t,l,i,s,r){return(0,a.wg)(),(0,a.iD)("form",{onSubmit:t[3]||(t[3]=(0,n.iM)(((...e)=>i.registerSubmit&&i.registerSubmit(...e)),["prevent"]))},[be,(0,a.wy)((0,a._)("input",{type:"text",placeholder:"Display name","onUpdate:modelValue":t[0]||(t[0]=e=>i.displayName=e)},null,512),[[n.nr,i.displayName]]),(0,a.wy)((0,a._)("input",{type:"email",placeholder:"Email","onUpdate:modelValue":t[1]||(t[1]=e=>i.email=e)},null,512),[[n.nr,i.email]]),(0,a.wy)((0,a._)("input",{type:"password",placeholder:"Password","onUpdate:modelValue":t[2]||(t[2]=e=>i.password=e)},null,512),[[n.nr,i.password]]),i.error?((0,a.wg)(),(0,a.iD)("div",ke,(0,o.zw)(i.error),1)):(0,a.kq)("",!0),i.isPending?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("button",De,"Sign up")),i.isPending?((0,a.wg)(),(0,a.iD)("button",Pe,"Loading")):(0,a.kq)("",!0)],32)}l(1703);const Se=(0,b.iH)(null),Ce=(0,b.iH)(!1),Ue=async(e,t,l)=>{Se.value=null,Ce.value=!0;try{const n=await H.createUserWithEmailAndPassword(e,t);if(!n)throw new Error("Could not complete signup");return await n.user.updateProfile({displayName:l}),Se.value=null,Ce.value=!1,n}catch(n){console.log(n.message),Se.value=n.message,Ce.value=!1}},qe=()=>({error:Se,signup:Ue,isPending:Ce});var Le=qe,je={setup(){const{error:e,signup:t,isPending:l}=Le(),n=(0,b.iH)(""),a=(0,b.iH)(""),i=(0,b.iH)(""),s=(0,O.tv)(),o=async()=>{await t(a.value,i.value,n.value);e.value||(s.push({name:"UserPlaylists"}),console.log("user signed up"))};return{email:a,password:i,displayName:n,isPending:l,error:e,registerSubmit:o}}};const Ie=(0,W.Z)(je,[["render",He]]);var Ae=Ie;const ze=(0,a._)("h4",null,"Create a New Playlist",-1),Ee=(0,a._)("label",null,"Upload Playlist Cover Image",-1),Oe={class:"error"},Ve={key:0},We={key:1,disabled:""};function Ze(e,t,l,i,s,r){return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("form",{onSubmit:t[3]||(t[3]=(0,n.iM)(((...e)=>i.createPlaylist&&i.createPlaylist(...e)),["prevent"]))},[ze,(0,a.wy)((0,a._)("input",{type:"text",required:"",placeholder:"Playlist title","onUpdate:modelValue":t[0]||(t[0]=e=>i.title=e)},null,512),[[n.nr,i.title]]),(0,a.wy)((0,a._)("textarea",{required:"",placeholder:"Playlist description...","onUpdate:modelValue":t[1]||(t[1]=e=>i.description=e)},null,512),[[n.nr,i.description]]),Ee,(0,a._)("input",{type:"file",onChange:t[2]||(t[2]=(...e)=>i.handleChange&&i.handleChange(...e))},null,32),(0,a._)("div",Oe,(0,o.zw)(i.fileError),1),i.isPending?((0,a.wg)(),(0,a.iD)("button",We,"Saving...")):((0,a.wg)(),(0,a.iD)("button",Ve,"Create"))],32)])}const{user:Ne}=E(),xe=()=>{const e=(0,b.iH)(null),t=(0,b.iH)(null),l=(0,b.iH)(null),n=async n=>{l.value=`covers/${Ne.value.uid}/${n.name}`;const a=S.ref(l.value);try{const e=await a.put(n);t.value=await e.ref.getDownloadURL()}catch(i){console.log(i.message),e.value=i}},a=async t=>{const l=S.ref(t);try{await l.delete()}catch(n){e.value=n.message}};return{uploadImage:n,url:t,filePath:l,error:e,deleteImage:a}};var Me=xe;const Fe=e=>{const t=(0,b.iH)(null),l=(0,b.iH)(!1),n=async n=>{t.value=null,l.value=!0;try{const t=await P.collection(e).add(n);return l.value=!1,t}catch(a){console.log(a.message),t.value="could not send the message",l.value=!1}};return{error:t,addDoc:n,isPending:l}};var Ye=Fe,Ke={setup(){const{filePath:e,url:t,uploadImage:l}=Me(),{error:n,addDoc:a}=Ye("playlists"),{user:i}=E(),s=(0,O.tv)(),o=(0,b.iH)(""),r=(0,b.iH)(""),u=(0,b.iH)(null),d=(0,b.iH)(null),c=(0,b.iH)(!1),p=async()=>{if(u.value){c.value=!0,await l(u.value);const d=await a({title:o.value,description:r.value,userId:i.value.uid,userName:i.value.displayName,coverUrl:t.value,filePath:e.value,songs:[],createdAt:C()});c.value=!1,n.value||(console.log("playlist added"),s.push({name:"PlaylistDetails",params:{id:d.id}}))}},v=["image/png","image/jpeg"],g=e=>{let t=e.target.files[0];console.log(t),t&&v.includes(t.type)?(u.value=t,d.value=null):(u.value=null,d.value="Please select an image file (png or jpg)")};return{title:o,description:r,createPlaylist:p,fileError:d,handleChange:g,isPending:c}}};const Te=(0,W.Z)(Ke,[["render",Ze]]);var Be=Te;const Re={key:0,class:"error"},$e={key:1,class:"playlist-details"},Ge={class:"playlist-info"},Qe={class:"cover"},Xe=["src"],Je={class:"username"},et={class:"description"},tt={class:"song-list"},lt={key:0},nt={class:"details"},at=["onClick"];function it(e,t,l,n,i,s){const r=(0,a.up)("AddSong");return(0,a.wg)(),(0,a.iD)(a.HY,null,[n.error?((0,a.wg)(),(0,a.iD)("div",Re,(0,o.zw)(n.error),1)):(0,a.kq)("",!0),n.playlistde?((0,a.wg)(),(0,a.iD)("div",$e,[(0,a._)("div",Ge,[(0,a._)("div",Qe,[(0,a._)("img",{src:n.playlistde.coverUrl},null,8,Xe)]),(0,a._)("h2",null,(0,o.zw)(n.playlistde.title),1),(0,a._)("p",Je,"Created by "+(0,o.zw)(n.playlistde.userName),1),(0,a._)("p",et,(0,o.zw)(n.playlistde.description),1),n.ownership?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:t[0]||(t[0]=(...e)=>n.handleDelete&&n.handleDelete(...e))},"Delete Playlist")):(0,a.kq)("",!0)]),(0,a._)("div",tt,[n.playlistde.songs.length?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",lt,"No songs have been added to this playlist yet.")),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.playlistde.songs,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id,class:"single-song"},[(0,a._)("div",nt,[(0,a._)("h3",null,(0,o.zw)(e.title),1),(0,a._)("p",null,(0,o.zw)(e.artist),1)]),n.ownership?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:t=>n.songDelete(e.id)},"Delete",8,at)):(0,a.kq)("",!0)])))),128)),n.ownership?((0,a.wg)(),(0,a.j4)(r,{key:1,addplaylist:n.playlistde},null,8,["addplaylist"])):(0,a.kq)("",!0)])])):(0,a.kq)("",!0)],64)}const st=e=>((0,a.dD)("data-v-330a25e8"),e=e(),(0,a.Cn)(),e),ot={class:"add-song"},rt=st((()=>(0,a._)("h4",null,"Add a New Song",-1))),ut=st((()=>(0,a._)("button",null,"Add",-1)));function dt(e,t,l,i,s,o){return(0,a.wg)(),(0,a.iD)("div",ot,[i.showForm?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:t[0]||(t[0]=e=>i.showForm=!0)},"Add Songs")),i.showForm?((0,a.wg)(),(0,a.iD)("form",{key:1,onSubmit:t[3]||(t[3]=(0,n.iM)(((...e)=>i.addSongSubmit&&i.addSongSubmit(...e)),["prevent"]))},[rt,(0,a.wy)((0,a._)("input",{type:"text",placeholder:"Song title",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>i.title=e)},null,512),[[n.nr,i.title]]),(0,a.wy)((0,a._)("input",{type:"text",placeholder:"Artist",required:"","onUpdate:modelValue":t[2]||(t[2]=e=>i.artist=e)},null,512),[[n.nr,i.artist]]),ut],32)):(0,a.kq)("",!0)])}const ct=(e,t)=>{const l=(0,b.iH)(null),n=(0,b.iH)(!1);let a=P.collection(e).doc(t);const i=async()=>{n.value=!0,l.value=null;try{const e=await a.delete();return n.value=!1,e}catch(e){n.value=!1,l.value="could not delete the document"}},s=async e=>{n.value=!0,l.value=null;try{const t=await a.update(e);return n.value=!1,t}catch(t){console.log(t.message),n.value=!1,l.value="could not update the document"}};return{error:l,isPending:n,deleteDoc:i,updateDoc:s}};var pt=ct,vt={props:["addplaylist"],setup(e){const t=(0,b.iH)(""),l=(0,b.iH)(""),n=(0,b.iH)(!1),{updateDoc:a}=pt("playlists",e.addplaylist.id),i=async()=>{const n={title:t.value,artist:l.value,id:Math.floor(1e6*Math.random())};await a({songs:[...e.addplaylist.songs,n]});t.value="",l.value=""};return{title:t,artist:l,showForm:n,addSongSubmit:i}}};const gt=(0,W.Z)(vt,[["render",dt],["__scopeId","data-v-330a25e8"]]);var mt=gt;const yt=(e,t)=>{const l=(0,b.iH)(null),n=(0,b.iH)(null);let i=P.collection(e).doc(t);const s=i.onSnapshot((e=>{e.data()?(l.value={...e.data(),id:e.id},n.value=null):n.value="that document does not exist"}),(e=>{n.value="could not fetch the document"}));return(0,a.m0)((e=>{e((()=>s()))})),{error:n,document:l}};var wt=yt,ht={props:["id"],components:{AddSong:mt},setup(e){const{error:t,document:l}=wt("playlists",e.id),{deleteDoc:n,updateDoc:i}=pt("playlists",e.id),{user:s}=E(),{deleteImage:o}=Me(),r=(0,O.tv)(),u=(0,a.Fl)((()=>l.value&&s.value&&s.value.uid==l.value.userId)),d=async()=>{await o(l.value.filePath),await n(),r.push({name:"Home"})},c=async e=>{const t=l.value.songs.filter((t=>t.id!=e));await i({songs:t})};return{error:t,playlistde:l,ownership:u,handleDelete:d,songDelete:c}}};const ft=(0,W.Z)(ht,[["render",it]]);var _t=ft;const bt={class:"user-playlists"},kt=(0,a._)("h2",null,"My Playlists",-1),Dt={key:0},Pt=(0,a.Uk)("Create a new Playlist");function Ht(e,t,l,n,i,s){const o=(0,a.up)("ListView"),r=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",bt,[kt,n.myplaylists?((0,a.wg)(),(0,a.iD)("div",Dt,[(0,a.Wm)(o,{playlistview:n.myplaylists},null,8,["playlistview"])])):(0,a.kq)("",!0),(0,a.Wm)(r,{to:{name:"CreatePlaylist"},class:"btn"},{default:(0,a.w5)((()=>[Pt])),_:1})])}var St={components:{ListView:ae},setup(){const{user:e}=E(),{documents:t}=$("playlists",["userId","==",e.value.uid]);return{myplaylists:t}}};const Ct=(0,W.Z)(St,[["render",Ht]]);var Ut=Ct;const qt=(e,t,l)=>{let n=H.currentUser;n?l():l({name:"Login"})},Lt=[{path:"/",name:"Home",component:oe,beforeEnter:qt},{path:"/login",name:"Login",component:_e},{path:"/signup",name:"Signup",component:Ae},{path:"/playlists/create",name:"CreatePlaylist",component:Be,beforeEnter:qt},{path:"/playlists/:id",name:"PlaylistDetails",component:_t,beforeEnter:qt,props:!0},{path:"/playlists/user",name:"UserPlaylists",component:Ut,beforeEnter:qt}],jt=(0,O.p7)({history:(0,O.PO)("/"),routes:Lt});var It=jt;let At;H.onAuthStateChanged((()=>{At||(At=(0,n.ri)(F).use(It).mount("#app"))}))},4563:function(e,t,l){e.exports=l.p+"img/ninja.b28c4fe4.png"}},t={};function l(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,l),i.exports}l.m=e,function(){var e=[];l.O=function(t,n,a,i){if(!n){var s=1/0;for(d=0;d<e.length;d++){n=e[d][0],a=e[d][1],i=e[d][2];for(var o=!0,r=0;r<n.length;r++)(!1&i||s>=i)&&Object.keys(l.O).every((function(e){return l.O[e](n[r])}))?n.splice(r--,1):(o=!1,i<s&&(s=i));if(o){e.splice(d--,1);var u=a();void 0!==u&&(t=u)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,a,i]}}(),function(){l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,{a:t}),t}}(),function(){l.d=function(e,t){for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){l.p="/"}(),function(){var e={143:0};l.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,i,s=n[0],o=n[1],r=n[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(a in o)l.o(o,a)&&(l.m[a]=o[a]);if(r)var d=r(l)}for(t&&t(n);u<s.length;u++)i=s[u],l.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return l.O(d)},n=self["webpackChunkvue_muso_ninja_project"]=self["webpackChunkvue_muso_ninja_project"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=l.O(void 0,[998],(function(){return l(9425)}));n=l.O(n)})();
//# sourceMappingURL=app.52aceb4e.js.map